# 项目路线图与待办清单

面向后续建设的方向规划与分阶段任务。包含对现有功能的不完善处的改进建议与落地事项。

## 总体方向

- [ ] 统一主题管理与样式覆盖，消除双系统重复（`assets/js/theme.js:1-50` 与 `assets/js/theme-manager.js:6-23`）
- [ ] 完善可访问性（键盘操作、焦点管理、ARIA 标签、对比度校验）
- [ ] 提升性能（按需加载、资源压缩、图片与 SVG 优化、动画降噪）
- [ ] 测试与质量保障（单元测试、E2E 测试、静态检查、CI）
- [ ] 知识库联动扩展与标签规范（统一标签到知识页映射策略）
- [ ] 国际化与本地化（中文/英文切换；日期、数字格式）
- [ ] SEO 与元信息完善（语义结构、meta、sitemap、Open Graph）
- [ ] 文档与示例完善（模块使用说明、贡献流程、设计规范对齐）

## 近期迭代（1–2 周）

- 树结构可视化（`tree.html`）
  - [ ] 支持“导入 JSON”以还原结构（导出参考 `assets/js/tree-algorithms.js:273-289`；按钮位于 `assets/js/app.js:888-897`）
  - [ ] 节点值编辑能力（影响 BST 判定 `assets/js/tree-algorithms.js:113-122`；创建时默认递增计数 `assets/js/app.js:161-169`）
  - [ ] 删除根节点的重接策略（当前简化为保留左或右子树 `assets/js/app.js:206-265`；需要更合理的重构接入）
  - [ ] 连接合法性细化与提示一致性（`assets/js/app.js:479-522` 与拖拽反馈 `assets/js/app.js:350-394`、`assets/js/app.js:412-463`）
  - [ ] 自动布局（层级排布与避免遮挡），提供手动/自动切换
  - [ ] 键盘可操作性（节点选择、移动、连接、删除的快捷键）

- 试卷系统（`exams.html`、`exam-viewer.html`）
  - [ ] 解析器鲁棒性提升（结构化题块 `assets/js/exams.js:71-89` 与普通题序 `assets/js/exams.js:92-136`，更强容错与错误提示）
  - [ ] 目录抓取回退策略优化（`assets/js/module-index.js:41-45` 本地目录禁用 listing 时的兜底方案）
  - [ ] 标签到知识页映射扩充（`assets/js/knowledge-index.js:3-9` 现为精简示例，需要覆盖常见主题）
  - [ ] 题目筛选与收藏、进度持久化增强（现有熟练度存储 `assets/js/exams.js:58-59`）

- 主题与设计系统
  - [ ] 统一主题切换入口（避免同时注入 `.theme-toggle` 与 `.theme-toggle-enhanced`）
  - [ ] 样式变量梳理：将散落的色值移入设计 Token（`assets/css/design-tokens.css`）
  - [ ] 响应式断点复核，统一页面布局的网格与间距（`assets/css/responsive.css`）

## 中期迭代（2–6 周）

- 数据结构扩展
  - [ ] 2-3 树、Treap、Trie 的完整交互演示（对应占位页面与 `assets/js/two-three-tree.js`、`assets/js/trie.js`）
  - [ ] 图算法步骤级可视化（最短路径、最小生成树、拓扑排序的动画与状态面板）
  - [ ] 排序算法统一控制面板（步进执行、随机数据生成、稳定性对比 `assets/js/sorting.js`）

- 知识库与导航
  - [ ] 自动生成知识索引与站内搜索（基于 `knowledge/` 目录）
  - [ ] 文章内的公式、图示统一风格（MathJax 配置与样式适配）

- 工程能力
  - [ ] 单元测试（算法与解析器）与 E2E（关键交互）基建
  - [ ] 质量门禁：代码扫描、格式化与简单 CI（静态站点可用的检查流程）

## 长期迭代（6+ 周）

- [ ] 课程化学习路径（从题目到知识到演示的闭环）
- [ ] 站内国际化与内容双语（页面与知识库）
- [ ] PWA/离线支持（核心页面与知识库的离线缓存）
- [ ] 分析与度量（匿名使用数据用于体验优化）

## 已知不完善处（现状）

- 主题系统重复与分散：`assets/js/theme.js:1-50` 与 `assets/js/theme-manager.js:6-23` 并存，部分页面只接入其一
- 试卷目录抓取依赖服务器目录 listing，某些环境下不可用（`assets/js/module-index.js:41-45`）
- 树节点仅显示递增编号，缺少值编辑与导入功能，影响 BST/堆等类型判定
- 删除根节点后的结构重接策略过于简化（`assets/js/app.js:206-265`）
- 树的自动布局缺失，节点易重叠、连线可读性不足
- 可访问性与键盘操作支持不足，右键菜单与拖拽对触屏/键盘不友好
- 测试与 CI 缺失，解析器与交互逻辑缺少自动化保障

---
此清单将随迭代更新，用于指导版本计划与实施优先级。