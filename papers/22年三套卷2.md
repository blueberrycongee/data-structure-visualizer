# 2022年三套卷2

## 数据结构

一、判断题(2*15=30)

1. (√)对有序向量做 Fibonacci查找,就最坏情况而言,成功查找所需的比较次数与失败查找相等。

2. (√)向量的插入排序算法过程中平均有 expected $-O(logn)$ 个元素无需移动

3. (√)考查任何一颗高度为h的二叉树T,设其深度为k的叶节点有 $n_{k}$ 个, $0\le k\le h$,则 $\sum_{k=0}^{n}\frac{n_{k}}{2^{k}}\le1$

4. (×)带权网络中不含权重相等的边,最短路径树一定唯一

5. (×)按单调增加或者单调减少的次序将 $2^{h+1}-1$ 个关键码插入到初始为空的AVL树中是得到的树是高度为h的满树的充分必要条件

6. (√)将一组共n个互异的关键码,按照单调的次序插入初始为空的m阶B-树中,可使得所得到的B-树高度最大。

7. (×)含有2012个内部节点的红黑树,最小黑高度是6,最大黑高度的是11

8. (√)锦标赛排序是稳定的。

9. (√)Floyd 建堆算法中,同层内部节点下虑的次序对建堆结果和时间都没有影响

10. (√)经过不超过O(n)次旋转,等价的BST均可互相转化

11. (×)在对二进制串做匹配时,采用next[]表比采用bc[]表通常效率更高。

12. (√)即便 $f(n)=O(g(n))$ 也未必 $2^{f(n)}=O(2^{g(n)})$

13. (×)起泡排序的每一趟扫描交换中若元素发生交换,则相邻的逆序对必然减少

14. (√)哈夫曼树不仅未必唯一,拓扑结构未必相同,甚至树高也可能不等。

15. (×)胜者树的根节点即是冠军,而败者树的根节点即是亚军。

二、选择题 (2*5=10)

1. (B)对长度为 $Fib(12)-1=143$ 的有序向量做fibonacci 查找,比较操作的次数至多为
   A. 12
   B. 11
   C. 10
   D. 9

2. (E)在包含2010个节点的AVL树中,最高与最低叶节点之间的深度差最大可达()
   A. 8
   B. 9
   C. 10
   D. 11
   E. 以上皆非

3. (D)设x为某伸展树中最大关键码,则在find(x)过程中可能实施()调整。
   A. zig-zig
   B. zig-zag
   C. zag-zig
   D. zag-zag
   E. 以上皆非

4. (C)6个互异节点组成、先序遍历序列与层次遍历序列相同的BST,共有()棵
   A. 68
   B. 69
   C. 70
   D. 71
   E. 72

5. (D)字符串"123XY"中的字符经过栈混洗之后,可得到()个合法的C++变量名(比如"YX321")
   A. 28
   B. 12
   C. 6
   D. 5
   E. 以上皆非

三、解答题(3+6+3=12)

1. 如图,3阶B-树,请画出删除关键码30之后的B-树
   (原B-树结构示意)
   ```
       0054
     /      \
  0030      0070
  /  \      /   \
0021 0053 0060 0080 0089
   ```
   答案:
   (删除后B-树结构示意)
   ```
       0054       0070
     /      \     /   \
  0021 0053 0060 0080 0090
   ```

2. 考查包含1600个关键码的16阶B-树,约定根节点常驻内存,且在各节点内部采用顺序查找。
   a)在单次成功查找的过程中,至多可能需要读多少次磁盘?请列出估算的依据。
   答案: 3次
   
   b) 在单次成功查找的过程中,至多可能有多少个关键码需要与目标关键码做比较?请列出估算的依据。
   答案: 45次

3. 对于其他BBST,红黑树的优势有哪些?
   答案: 并发性好,持久性好

三、算法题(13)

1. 以下代码中的int parent[0, n) 是采用父节点表示法存储的任意一棵有根(但未必有序)的多叉树。
   ```c
   int f(int parent[], int n) { // -1<n
       int h = -1;
       for (int i=0;i<n;i++)
           h = max(h, g(parent, i));
       return h;
   }
   int g(int parent[], int i) {
       if (-1==i) return -1;
       return 1 + g(parent, parent[i]);
   }
   ```
   
   A) 以上算法f()和g()分别是何功能?
   答案: g()是节点深度,f()是树的高度
   
   B) 在最坏情况下,算法f()的渐进时间复杂度是多少?最坏情况何时出现?
   答案: O(n²),除了叶节点之外全部节点都是单分支的情况下。
   
   C) 在不做任何删除的前提下,试通过增加尽可能少的代码,使f()的运行时间降至O(n),空间不超过O(n)。
   简要说明你的改进策略与思路,然后直接在原代码基础上完成修改,并为关键环节增加注释。
   答案: 使用记忆化搜索
   ```c
   int memo[n] = {0}; // 记忆化数组
   
   int g(int parent[], int i) {
       if (i == -1) return -1;
       if (memo[i] != 0) return memo[i];
       memo[i] = 1 + g(parent, parent[i]);
       return memo[i];
   }
   ```

2. 在不改变BST和 BinNode 定义的前提下(BinNode 仅存储 parent, data, lc,rc),设计算法,使得从节点 x 出发,查找值为Y的节点y的时间复杂度为O(d), d为节点x与y的距离。要求利用树的局部性,复杂度与总树高无关,否则将不能按满分起评。
   函数定义式:参量为 BinNode x,y,T,返回值为BinNode类型,函数名 fingerSearch
   
   (a)说明算法思路
   答案: 交替向上和向下搜索
   
   (b)写出伪代码
   答案: 
   ```c
   BinNode fingerSearch(BinNode x, int y) {
       BinNode current = x;
       while (current != NULL) {
           if (current->data == y) return current;
           if (current->data < y) {
               if (current->rc != NULL && current->rc->data <= y) 
                   current = current->rc;
               else 
                   current = current->parent;
           } else {
               if (current->lc != NULL && current->lc->data >= y) 
                   current = current->lc;
               else 
                   current = current->parent;
           }
       }
       return NULL;
   }
   ```
   
   (c)在图中画出由值为6的点查找值为17的点的查找路径
   答案: 6→8→12→15→17
   
   (d)说明算法时间复杂度为O(d)(若无法达到,说明困难在哪)
   答案: 可以达到O(d)

## 操作系统

一、判断题(1*5=5)

1. (√)OS在建立页表并使能页机制时,需要特权指令才能最终完成

2. (×)由于栈的原因,在OS内核中不能执行系统调用(syscall)来获得OS内核的服务

3. (√)最短寻道时间优先算法对SSD硬盘来说是无效的。

4. (√)hoare 管程的开销比 hansen 管程大

5. (√)由于符号链接(软链接)实际上是一类特殊的文件,它的内容就是其所指向的文件或目录的路径,所以符号链接可以指向一个不存在的文件或目录。

二、选择题(1*5=5)

1. (D)【2018统考真题】若x是管程内的条件变量,则当进程执行x.wait()时所做的工作是()。
   A. 实现对变量x的互斥访问
   B. 唤醒一个在x上阻塞的进程
   C. 根据x的值判断该进程是否进入阻塞态
   D. 阻塞该进程,并将之插入x的阻塞队列中

2. (B)【2015统考真题】若系统S₁采用死锁避免方法,S₂采用死锁检测方法。下列叙述中,正确的是()。
   I. S₁会限制用户申请资源的顺序,而S₂不会
   II. S₁需要进程运行所需的资源总量信息,而S₂不需要
   III. S₁不会给可能导致死锁的进程分配资源,而S₂会
   A. 仅I、II
   B. 仅II、III
   C. 仅I、III
   D. I、II、III

3. (B)【2017统考真题】某计算机按字节编址,其动态分区内存管理采用最佳适应算法,每次分配和回收内存后都对空闲分区链重新排序,当前空闲分区信息如下表所示。
   | 分区始址 | 20K | 500K | 1000K | 200K |
   | 分区大小 | 40KB | 80KB | 100KB | 200KB |
   回收始址为60K、大小为140KB的分区后,系统中空闲分区的数量、空闲分区链第一个分区的始址和大小分别是()。
   A. 3, 20K, 380KB
   B. 3, 500K, 80KB
   C. 4, 20K, 180KB
   D. 4, 500K, 80KB

4. (A)【2018统考真题】系统总是访问磁盘的某个磁道而不响应对其他磁道的访问请求,这种现象称为磁臂黏着。下列磁盘调度算法中,不会导致磁臂黏着的是( )。
   A. 先来先服务(FCFS)
   B. 最短寻道时间优先(SSTF)
   C. 扫描算法(SCAN)
   D. 循环扫描算法(CSCAN)

5. (B)【2011统考真题】用户程序发出磁盘I/O请求后,系统的正确处理流程是( )。
   A. 用户程序→系统调用处理程序→中断处理程序→设备驱动程序
   B. 用户程序→系统调用处理程序→设备驱动程序→中断处理程序
   C. 用户程序→设备驱动程序→系统调用处理程序→中断处理程序
   D. 用户程序→设备驱动程序→中断处理程序→系统调用处理程序

三、简答题(5+3+3+9=20)

1. 关于局部页面替换算法:最优算法(OPT)、先进先出算法(FIFO)、最近最久未使用算法(LRU)、时钟(clock)页面置换算法。
   (1)请问,什么是Belady现象?在上述四种算法中,哪些算法可能存在Belady现象?
   答案: Belady现象是指分配的页框数增多但缺页率反而升高的现象。FIFO和CLOCK算法可能存在Belady现象。
   
   (2)请问,设一个页面访问序列为0,1,4,2,3,4,1,0,3,2,且物理页帧中最多能容纳4个页面,初始时物理页帧为空,请用FIFO,LRU算法进行模拟,给出每一次访问的情况以及访问后物理页帧的状态,最终给出总缺页次数。
   答案: 
   FIFO缺页次数: 7次
   LRU缺页次数: 8次

2. 在多处理机调度中,就绪任务队列的维护有两种策略:(1)单队列:使用无锁数据结构,维护一个全局队列。(2)多队列:每个核有一个自己的局部队列。这两种方案相比,分别有什么好处和不足?
   答案: 单队列负载均衡好但扩展性差;多队列扩展性好但负载均衡困难

3. Stride 调度如何保证步长溢出后也可以正常工作的?
   答案: 使用有符号整数表示步长差值

4. 在实现各种锁时,需要让一些 Read-Modify-Write 操作同时进行,且不能被其他线程打断,这就需要用硬件提供的原子操作指令来实现。常见的原子操作指令有TestAndSet/CompareAndSwap/FetchAndAdd 等。
   
   a)用 TestAndSet 原子指令,实现自旋锁。
   ```c
   struct lock {
       int value = 0;
   };
   
   void lock_acquire(struct lock *spin) {
       while (TestAndSet(&spin->value)) ;
   }
   
   void lock_release(struct lock *spin) {
       spin->value = 0;
   }
   ```
   
   b)用 CompareAndSwap 原子指令,实现自旋锁。
   ```c
   struct lock {
       int value = 0;
   };
   
   void lock_acquire(struct lock *spin) {
       while (!CompareAndSwap(&spin->value, 0, 1)) ;
   }
   
   void lock_release(struct lock *spin) {
       spin->value = 0;
   }
   ```
   
   c)使用 FetchAndAdd 原子指令原语可实现一种 ticket lock,试分析这种锁与自旋锁相比有何优势?
   答案: 保证公平性(FIFO),避免线程饥饿

## 组成原理

一、判断题(3*1=3)

1. (×)CPI (Cycles Per Instruction)用来衡量指令执行平均所需要的周期数,CPI越小,代表执行相同的程序所需要的时间越短。

2. (×)处理器缓存Cache与存储器的地址的映射关系是由操作系统来管理的。

3. (√)只要运算器具有加法器和移位功能,再增加一些控制逻辑,就能实现乘除运算。

二、填空题(9*1=9)

1. 指令系统的设计要求是: 完备性、规整性、高效性、兼容性

2. -2017的IEEE754单精浮点数表示为: C4FC2000H

3. 若海明码P1P2D1P3D2D3P4为0101100,则该海明码有(1)位错误,正确的D₁D₂D₃为(110)

4. 为了存储256GB的数据,使用RAID1的方式,所占用的磁盘空间大小为512GB,使用RAID6的方式(4+2),所占用的磁盘空间大小为384GB

三、选择题(3*1=3)

1. (A)单级中断系统中,中断服务程序内的执行顺序是( )
   I保护现场 II开中断 III关中断 IV 保护断点 V中断事件处理 VI恢复现场 VII 中断返回
   A. I→V→VI→III→VII
   B. III→I→V→VI→VII
   C. III→IV→V→VI→VII
   D. IV→I→V→VI→VII

2. (A)下列关于"自陷"(Trap,也称陷阱)的叙述中,错误的是()。
   A. 自陷是通过陷阱指令预先设定的一类外部中断事件
   B. 自陷可用于实现程序调试时的断点设置和单步跟踪
   C. 自陷发生后CPU将转去执行操作系统内核相应程序
   D. 自陷处理完成后将返回到陷阱指令的下一条指令执行

3. (A)周期挪用方式常用于( )方式的输入/输出中
   A. DMA
   B. 中断
   C. 程序传送
   D. 通道

三、计算题 (10+6=16)

1. 考虑某一台计算机虚拟地址到物理地址的地址转换过程。注意以下几点说明:
   (1)内存是字节寻址的;
   (2)内存一次访问1字节;
   (3)虚拟地址16位;
   (4)物理地址13位;
   (5)页大小512字节;
   (6)TLB是8路组相连,共16个单元;
   (7)缓存是2路组相连的结构,缓存块(cache line)大小为4个字节,一共16块。
   
   问题1:(2分)虚拟地址格式划分
   答案: 
   - VPO: 9位(位8-0)
   - VPN: 7位(位15-9) 
   - TLBI: 1位(位9)
   - TLBT: 6位(位15-10)
   
   问题2: 物理地址格式划分
   答案:
   - PPO: 9位(位8-0)
   - PPN: 4位(位12-9)
   - CO: 2位(位1-0)
   - CI: 3位(位4-2)
   - CT: 8位(位12-5)
   
   问题3: 虚拟地址0x1DDE的转换过程
   答案:
   - VPN: 0x0E
   - TLB Index: 0x0
   - TLB Tag: 0x07
   - TLB Hit: N
   - Page Fault: N
   - PPN: 0x1
   - 物理地址: 0x3DE
   - Cache Index: 0x7
   - Cache Tag: 0x1E
   - Cache Hit: Y
   - Cache Byte returned: 0x0F

2. 内存的读写延迟是10ns,ALU的延迟是6ns,寄存器输出延迟3ns,输入延迟是1ns,锁存器延迟2ns,pc延迟2ns,计算机运行以下程序:
   ```
   LW R4 0 (R5)
   ADD R6 R4 R7
   SUB R8 R5 R9
   SW R8 0 (R9)
   ```
   (1)按照单周期CPU来算,执行完这4条指令,需要多长时间?
   答案: 单周期CPU以最慢指令为准，需要分析各指令所需时间
   
   (2)按照多周期CPU来算,执行完这4条指令,需要多长时间?
   答案: 多周期CPU各指令周期数不同，需要分别计算
   
   (3)按照流水线来算,不做编译器优化,不考虑数据旁路,上升沿写寄存器,下降沿读寄存器,执行完这4条指令需要多长时间?
   答案: 流水线需要考虑流水线阶段数和冲突处理

## 计算机网络

一、选择题(7*1=7分)

1. (C)在下列关于分层体系结构的说法中,不正确的是()。
   A. 各层之间只要接口关系不变,某一层改变时,其上下层不受影响
   B. 结构分离使得实现和维护变得容易
   C. 层次越多越灵活,效率越高
   D. 各层功能的定义独立于具体实现的方法

2. (D)若信道在无噪声情况下的极限数据传输率不小于信噪比为30dB条件下的极限数据传输率,则信号状态数至少是()
   A. 4
   B. 8
   C. 16
   D. 32

3. (D)哪一个不是数据链路层提供给网络层的服务
   A. 无确认无连接服务
   B. 有确认无连接服务
   C. 有确认有连接服务
   D. 无确认有连接服务

4. (A)假定x位用户数据将以一系列分组的形式,在一个分组交换网络中沿着一条共有k跳的路径向前传输,每个分组包含p位数据和h位的头,这里x>>p+h。线路的传输率为bbps,传播延迟忽略不计。请问,什么样的p值使总延迟最小?
   A. $\sqrt{\frac{hx}{k-1}}$
   B. $\sqrt{\frac{hx}{k}}$
   C. $\sqrt{\frac{2hx}{k}}$
   D. $\sqrt{\frac{2hx}{k-1}}$

5. (A)下列路由选择协议中属于链路状态协议的是()。
   A. OSPF
   B. BGP
   C. RIP
   D. ICMP

6. (D)下列关于DNS的说法中,错误的是( )
   A. 复制根域名服务器,将服务器上的副本存在不同的网络中可以优化域名系统的性能。
   B. DNS记录是一个五元组
   C. DNS是分布式存储的
   D. 一个域名可以对应多个IP,但是一个IP不能对应多个域名。

7. (题目缺失)

二、解答题 (6+7=13)

1. TCP拥塞控制分析
   - 传输轮次1-6:慢开始算法
   - 传输轮次6-16:拥塞避免算法
   - 第16轮次:收到3个重复ACK，执行快重传
   - 第22轮次:超时事件，窗口减为1
   - 阈值设置:第1轮32，第18轮21，第24轮13
   - 第70报文段:第7轮次发送
   - 第26轮次后收到3个冗余ACK:窗口设为4，阈值为当前窗口一半

2. 距离向量算法
   J新估算的延迟:
   | 目的节点 | 延迟 | 线路 |
   |---------|------|------|
   | A | 20 | A |
   | B | 20 | A |
   | C | 28 | I |
   | D | 20 | H |
   | E | 17 | I |
   | F | 30 | I |
   | G | 18 | H |
   | H | 12 | H |
   | I | 10 | I |
   | J | 0 | - |
   | K | 6 | K |
   | L | 15 | K |