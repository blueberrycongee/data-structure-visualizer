好的，这是对课程最后一部分内容的完整总结，涵盖了所有提到的知识点。

### **第一部分：数据链路层作业回顾与勘误**

1.  **作业题讲解**
    *   **成帧方法 (第1题)**：演示了字节计数法、带字节填充的定界符法和带比特填充的定界符法的具体操作。
    *   **CRC计算 (第2题)**：讲师提到作业答案中使用了与他课上不同的计算方法，但结果一致。他重申自己推荐的方法虽然步骤多但更稳妥，不易出错。
    *   **汉明码 (第3题)**：作业答案与《组成原理》课程中的方法（如异或校验）在本质上是相同的，只是表现形式不同。
    *   **信道利用率计算 (第4, 5, 6题及后续)**：核心是套用信道利用率公式 `U = T_f / (T_s + RTT + T_a)`。需要注意区分不同协议（停止-等待、GBN、SR）下发送窗口大小 `W_S` 的最大值限制，并正确代入计算。
        *   **GBN**: `W_S ≤ 2^n - 1`
        *   **SR (W_S=W_R)**: `W_S ≤ 2^(n-1)`

2.  **作业答案勘误与讨论**
    *   **河流的传输模式**：讲师课上根据Tanenbaum教材官方答案讲解为**单工**，但作业答案给出了**单工或半双工**。讲师认为两种说法都有其合理性，不必过于纠结。
    *   **FDM保护带计算**：讲师课上按照教材示例（每个信号都附加一个保护带）进行计算，而作业答案采用了更精确的计算方式（N个信号有N-1个保护带）。讲师建议，若考试遇到，**以作业答案的计算方式为准**。
    *   **确认帧长度**：讲师提醒，考试时会明确说明是否忽略确认帧的传输开销。若未说明，需根据是否为捎带确认来判断（捎带确认则确认帧与数据帧等长）。

### **第二部分：介质访问控制 (MAC) 子层**

1.  **MAC子层概述**
    *   **位置**：数据链路层的下半部分，负责解决多个节点如何共享一个广播信道的问题。
    *   **核心问题**：**信道分配问题**，即如何决定下一个可以使用信道的节点，以避免或解决**冲突 (Collision)**。
    *   **协议分类**：
        *   **随机访问协议 (Random Access)**：节点独立决策，可能发生冲突。如ALOHA、CSMA。
        *   **受控访问协议 (Controlled Access)**：节点间协调，无冲突。
        *   **有限竞争协议 (Limited Contention)**：结合前两者特点。
    *   **可靠性**：讲师强调，**MAC协议本身不保证可靠传输**。可靠性需要通过确认和重传机制（由数据链路层其他部分或更高层提供）来实现。

2.  **随机访问协议 - ALOHA**
    *   **纯ALOHA (Pure ALOHA)**：
        *   **原理**：**想发就发**。节点有数据就立即发送。
        *   **冲突检测**：不是通过监听信道，而是通过其他机制（如未收到上层的ACK）来判断。
        *   **冲突解决**：若发生冲突，发送方等待一个**随机**时间后重传。
        *   **冲突危险期**：对于一个长度为`T_frame`的帧，其冲突危险期为 `2 * T_frame`。因为在该帧发送前的`T_frame`时间内或发送中的`T_frame`时间内，任何其他节点的发送都会造成冲突。
        *   **最大信道利用率**：约为 **18.4%** (`1 / (2e)`)。
    *   **分槽ALOHA (Slotted ALOHA)**：
        *   **原理**：将时间划分为离散的**时隙 (Slot)**，长度等于一个帧的发送时间。节点只能在**每个时隙的开始时刻**才能发送数据。
        *   **改进**：大大减少了冲突的可能性，因为冲突只会发生在同一时隙内。
        *   **冲突危险期**：减少为 `1 * T_frame`。
        *   **最大信道利用率**：提升至约 **36.8%** (`1 / e`)。
    *   **利用率推导 (补充)**：讲师补充了《计算机网络：自顶向下方法》一书中基于概率论的推导过程，该方法通过定义单个节点发送概率`p`和节点总数`N`等基本变量，推导出在`N`趋于无穷时的极限利用率，比Tanenbaum教材中的方法更易于理解。

3.  **随机访问协议 - 载波侦听多路访问 (CSMA)**
    *   **核心思想**：在ALOHA的基础上增加了**载波侦听 (Carrier Sense)** 的功能。
    *   **原理**：**先听后发 (Listen Before Talk)**。节点在发送数据前，先侦听信道。
        *   如果信道**空闲**，则发送数据。
        *   如果信道**忙碌**，则等待。
    *   **CSMA的三种坚持策略**（决定信道忙碌时如何等待）：
        *   **1-坚持CSMA (1-persistent CSMA)**：持续侦听信道，一旦空闲立即发送。
        *   **非坚持CSMA (Non-persistent CSMA)**：侦听到信道忙碌后，等待一个随机时间，然后重新侦听。
        *   **p-坚持CSMA (p-persistent CSMA)**：用于分槽信道。侦听到信道空闲后，以概率`p`发送，以概率`1-p`延迟到下一个时隙。

### **课程安排预告**

*   由于时间关系，讲师决定将原计划的内容分节讲解。
*   休息后，将继续详细讲解CSMA的三种坚持策略，并引入**带冲突检测的CSMA (CSMA/CD)**，这是以太网的核心技术之一。